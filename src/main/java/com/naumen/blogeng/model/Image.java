package com.naumen.blogeng.model;

import jakarta.persistence.*;

import org.springframework.lang.NonNull;

import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.io.UncheckedIOException;
import java.util.Base64;



@Entity
@Table(name = "images")
public class Image {

    private static final String DEFAULT_64 = "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";

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;

    @NonNull
    private String ext;

    @NonNull
    @Column(columnDefinition="TEXT")
    private String base64;



    public Image(){

    }

    public Image(@NonNull BufferedImage image, @NonNull String ext) {
        this.ext = ext;
        this.base64 = imgToBase64(image, ext);
    }

    public Image(@NonNull String base64, @NonNull String ext) {
        this.ext = ext;
        this.base64 = base64;
    }

    public long getId() {
        return id;
    }

    @NonNull
    public String getExt() {
        return ext;
    }

    private static String imgToBase64(final BufferedImage img, final String formatName) {
        final ByteArrayOutputStream os = new ByteArrayOutputStream();
        try (final OutputStream b64os = Base64.getEncoder().wrap(os)) {
            ImageIO.write(img, formatName, b64os);
        } catch (final IOException ioe) {
            throw new UncheckedIOException(ioe);
        }
        return os.toString();
    }

    @NonNull
    public String getBase64() {
        return base64;
    }

    public static String getDefault64() {
        return DEFAULT_64;
    }
}
